<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MattTube</title>
  <style>
    /* Your previous CSS (no changes needed) */
    /* ... (Same CSS you posted) ... */

    /* New modal styling */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: #2c2c2c;
      padding: 20px;
      border-radius: 8px;
      width: 300px;
      color: white;
    }

    .modal-content input {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      border-radius: 4px;
      border: 1px solid #444;
      background-color: #444;
      color: white;
    }

    .modal-content button {
      width: 100%;
      margin-top: 10px;
    }

    .profile-link {
      color: #ccc;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- Fixed Header -->
  <header id="header">
    <a href="index.html" id="homeLink"><h1>MattTube</h1></a>
    <div id="authSection">
      <button class="button" onclick="openLoginModal()">Login / Register</button>
    </div>
    <input type="text" placeholder="Search videos..." />
  </header>

  <!-- Login/Register Modal -->
  <div id="authModal" class="modal">
    <div class="modal-content">
      <h3>Login / Register</h3>
      <input type="text" id="loginUsername" placeholder="Username">
      <input type="password" id="loginPassword" placeholder="Password">
      <button class="button" onclick="login()">Login</button>
      <button class="button" onclick="register()">Register</button>
    </div>
  </div>

  <!-- Your previous video section -->
  <!-- ... (SAME as you posted: video-card, content, footer, transparent text) ... -->

  <script>
    let currentUser = null;

    function openLoginModal() {
      document.getElementById('authModal').style.display = 'flex';
    }

    function closeLoginModal() {
      document.getElementById('authModal').style.display = 'none';
    }

    function login() {
      const username = document.getElementById('loginUsername').value.trim();
      const password = document.getElementById('loginPassword').value;
      const users = JSON.parse(localStorage.getItem('users')) || {};

      if (users[username] && users[username].password === password) {
        currentUser = username;
        localStorage.setItem('currentUser', username);
        alert('Logged in as ' + username);
        updateAuthUI();
        closeLoginModal();
      } else {
        alert('Incorrect username or password.');
      }
    }

    function register() {
      const username = document.getElementById('loginUsername').value.trim();
      const password = document.getElementById('loginPassword').value;
      const users = JSON.parse(localStorage.getItem('users')) || {};

      if (users[username]) {
        alert('Username already exists.');
        return;
      }

      users[username] = { password: password, likes: 0, subscriptions: 0, comments: [] };
      localStorage.setItem('users', JSON.stringify(users));
      alert('Registered successfully! You can now login.');
    }

    function updateAuthUI() {
      const authSection = document.getElementById('authSection');
      if (currentUser) {
        authSection.innerHTML = `<span class='profile-link' onclick='viewProfile()'>@${currentUser}</span> <button class="button" onclick="logout()">Logout</button>`;
      } else {
        authSection.innerHTML = `<button class="button" onclick="openLoginModal()">Login / Register</button>`;
      }
    }

    function logout() {
      localStorage.removeItem('currentUser');
      currentUser = null;
      updateAuthUI();
    }

    function viewProfile() {
      const users = JSON.parse(localStorage.getItem('users')) || {};
      const userData = users[currentUser];

      if (!userData) return;

      alert(`Profile: @${currentUser}\nLikes: ${userData.likes}\nSubscriptions: ${userData.subscriptions}\nComments: ${userData.comments.length}`);
    }

    // Open a video by ID
    function openVideo(videoId, title) {
      disableElements();
      document.getElementById('videoContent').style.display = 'flex';
      const iframe = document.getElementById('videoIframe');
      iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
      document.getElementById('videoTitle').innerText = title;
      document.getElementById('videoInfo').innerText = 'MattTube Video';
      const thumbnails = document.querySelectorAll('.video-thumbnail');
      thumbnails.forEach(thumbnail => thumbnail.classList.add('disabled-thumbnail'));
      loadComments();
    }

    function toggleLike() {
      if (!currentUser) return alert('Please log in to like.');
      const users = JSON.parse(localStorage.getItem('users')) || {};
      users[currentUser].likes++;
      localStorage.setItem('users', JSON.stringify(users));
      alert('Liked! Total Likes: ' + users[currentUser].likes);
    }

    function toggleSubscribe() {
      if (!currentUser) return alert('Please log in to subscribe.');
      const users = JSON.parse(localStorage.getItem('users')) || {};
      users[currentUser].subscriptions++;
      localStorage.setItem('users', JSON.stringify(users));
      alert('Subscribed! Total Subs: ' + users[currentUser].subscriptions);
    }

    function loadComments() {
      const commentList = document.getElementById('commentList');
      commentList.innerHTML = '';
      const users = JSON.parse(localStorage.getItem('users')) || {};
      for (let user in users) {
        users[user].comments.forEach(comment => {
          const commentElement = document.createElement('div');
          commentElement.classList.add('comment');
          commentElement.innerText = `${user}: ${comment}`;
          commentList.appendChild(commentElement);
        });
      }
    }

    function addComment() {
      if (!currentUser) return alert('Please log in to comment.');
      const commentInput = document.getElementById('commentInput');
      const text = commentInput.value.trim();
      if (!text) return;

      const users = JSON.parse(localStorage.getItem('users')) || {};
      users[currentUser].comments.push(text);
      localStorage.setItem('users', JSON.stringify(users));

      commentInput.value = '';
      loadComments();
    }

    function disableElements() {
      document.getElementById('header').classList.add('disabled');
      document.querySelectorAll('.video-card').forEach(card => card.classList.add('disabled'));
      document.getElementById('homeLink').classList.add('disabled');
    }

    window.onload = function() {
      currentUser = localStorage.getItem('currentUser');
      updateAuthUI();
      loadComments();
    }
  </script>
</body>
</html>
